<!DOCTYPE html>

<body>
    <button id = "Rock"> Rock </button>
    <button id = "Paper"> Paper </button>
    <button id = "Scissors"> Scissor </button>

    <div id = "rounds"> 
        <div id = "playerScore"></div>
        <div id = "computerScore"></div>
    </div>
</body>
<script>
    function computerPlay() {
        let choices = ['Rock', 'Paper', 'Scissors'];
        choice = choices[Math.floor(Math.random() * choices.length)];
        return choice;
    }
    function playRound(playerSelection, computerSelection) {
        selection = playerSelection.toLowerCase();
        if (selection == 'rock'){
            if (computerSelection == 'Rock'){
                return 'Draw. You both threw rock. Go again!';
            }
            if (computerSelection == 'Paper'){
                return 'Computer wins! Paper beats rock.';
            }
            else {
                return 'You win! Rock beats scissors.';
            }
        }
        if (selection == 'paper'){
            if (computerSelection == 'Rock'){
                return 'You win! Paper beats rock.';
            }
            if (computerSelection == 'Paper'){
                return 'Draw. You both threw paper. Go again!';
            }
            else {
                return 'Computer wins! Scissor beats paper.';
            }
        }
        if (selection == 'scissors'){
            if (computerSelection == 'Rock'){
                return 'Computer wins! Rock beats scissors.';
            }
            if (computerSelection == 'Paper'){
                return 'You win! Scissors beats paper.';
            }
            else {
                return 'Draw. Go again! You both threw scissors.';
            }
        }
        else {
            selection = window.prompt('Choose from selection. \
                 Would you like to throw rock paper or scissors?');
            return playRound(selection, computerPlay());
        }
    }

    // function game(playRound) {
    //     let playerScore = 0;
    //     let computerScore = 0;
    //     for (let i = 0; i < 5; i++) {
    //         userChoice = window.prompt('Would you like to throw rock, paper, or scissors?');
    //         str = playRound(userChoice, computerPlay());
    //         if (str.match(/Comp/)) {
    //             computerScore += 1;
    //         }
    //         if  (str.match(/You win!/)) {
    //             playerScore += 1;
    //         }
    //         console.log(str);
    //     }

    //     if (playerScore > computerScore) {
    //         return `Player wins! Player's score: ${playerScore}, Computer's score ${computerScore}`;
    //     }

    //     else if (computerScore > playerScore) {
    //         return `Computer wins! Player's score: ${playerScore}, Computer's score ${computerScore}`;
    //     }

    //     else {
    //         return `Draw! Player's score: ${playerScore}, Computer's score ${computerScore}`;
    //     }

    // }

    const buttons = document.querySelectorAll('button');
    
    let playerScore = 0;
    let computerScore = 0;

    buttons.forEach((button) => {
        button.addEventListener('click', (e) => {
            let round = (playRound(button.id, computerPlay()));
            
            divround.textContent = round;

            if (round.match(/Comp/)) {
                computerScore += 1;
                s2.textContent = `Computer score: ${computerScore}`;
                if (computerScore > 4) {
                    alert(`Computer wins! Player's score: ${playerScore}, Computer's score ${computerScore}`);
                    location.reload();
                }
                }
            if (round.match(/You win!/)) {
                playerScore += 1;
                s1.textContent = `Player Score: ${playerScore}`;
                if (playerScore > 4) {
                    alert(`Player wins! Player's score: ${playerScore}, Computer's score ${computerScore}`);
                    location.reload();
                }
            }
        })
    });


    const current = document.querySelector('#rounds');
    const divround = document.createElement('p');
    current.appendChild(divround);
    
    
    const players = document.querySelector('#playerScore');
    const s1 = document.createElement('p');
    s1.textContent = `Player Score: ${playerScore}`;
    players.appendChild(s1);

    const computers = document.querySelector('#computerScore');
    const s2 = document.createElement('p');
    s2.textContent = `Computer score: ${computerScore}`;
    computers.appendChild(s2);

</script>